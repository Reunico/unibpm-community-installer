# ------------------------------------------------------------
# Mode
#   local - без публичных доменов/LE, удобно для теста на VM
#   edge  - публичные домены + nginx + certbot
# ------------------------------------------------------------
DEPLOY_MODE=local
ROUTING_MODE=subdomain

# local ports
FRONT_PUBLIC_PORT=8080
BACKEND_PUBLIC_PORT=8099
KEYCLOAK_BIND_ADDRESS=127.0.0.1
KEYCLOAK_PUBLIC_PORT=8082
CAMUNDA_PUBLIC_PORT=8081
FRONTEND_HTTP_PORT=80

# edge DNS (UniBPM + Keycloak required; Camunda DNS optional)
UNIBPM_DOMAIN=unibpm.company.com
KEYCLOAK_DOMAIN=auth.company.com
EXPOSE_CAMUNDA=false
CAMUNDA_DOMAIN=camunda.company.com

# TLS (Let's Encrypt HTTP-01) - edge only
ENABLE_TLS=false
LETSENCRYPT_EMAIL=admin@company.com
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443


# ------------------------------------------------------------
# Keycloak URLs
# KEYCLOAK_BASE_URL  - INTERNAL URL for containers (unibpm/camunda) inside docker network
# KEYCLOAK_INTERNAL_URL - URL reachable from HOST to run prepare.sh (published port, usually localhost:8082)
# KEYCLOAK_EXTERNAL_URL - PUBLIC browser URL (https://keycloak.<domain>/keycloak)
# ------------------------------------------------------------
KEYCLOAK_PATH=/keycloak
KEYCLOAK_BASE_URL=http://keycloak:8080/keycloak
KEYCLOAK_EXTERNAL_URL=http://localhost:8082/keycloak
KEYCLOAK_INTERNAL_URL=http://localhost:8082/keycloak

KEYCLOAK_HTTP_PORT=8080
KEYCLOAK_ENABLE_HTTPS=false
KEYCLOAK_PROXY_HEADERS=xforwarded
KEYCLOAK_PROXY=edge
KEYCLOAK_HOSTNAME_STRICT=false
KEYCLOAK_HOSTNAME_STRICT_HTTPS=true
KEYCLOAK_LOG_OUTPUT=console
KEYCLOAK_LOG_LEVEL=INFO
KEYCLOAK_ENABLE_STATISTICS=false
KEYCLOAK_CACHE_TYPE=ispn

KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin

KEYCLOAK_DATABASE_HOST=postgres
KEYCLOAK_DATABASE_PORT=5432
KEYCLOAK_DATABASE_NAME=keycloak
KEYCLOAK_DATABASE_USER=keycloak
KEYCLOAK_DATABASE_PASSWORD=keycloak

# App DB
DATASOURCE_USERNAME=postgres
DATASOURCE_PASSWORD=postgres

# App identity settings (used by templates)
KEYCLOAK_REALM=unibpm
UNIBPM_FRONT_CLIENT_ID=unibpm-front
